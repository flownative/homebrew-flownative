#
# DO NOT EDIT THIS FILE MANUALLY
#

def is_mac?
  RUBY_PLATFORM.downcase.include?("darwin")
end

def is_linux?
    RUBY_PLATFORM.downcase.include?("linux")
end

class Localbeach < Formula
  desc "Command line tool for Flownative Beach"
  homepage "https://www.flownative.com/beach"

  if is_mac?
    url "https://github.com/flownative/localbeach/releases/download/v1.0.0-alpha17%2B1/beach_darwin_amd64.zip", :using => CurlDownloadStrategy
    sha256 "a8e532dc292d184b468db91735ac29389f2b89465d22a3e590faf6b2d20153a8"
  else
    url "https://github.com/flownative/localbeach/releases/download/v1.0.0-alpha17%2B1/beach_linux_amd64.zip", :using => CurlDownloadStrategy
    sha256 "02540d3c4b61f1b52023162652c339ef2d05ec6bc72ac56b646d8618905aea0b"

  bottle :unneeded

  def install
    _databasepath = is_mac? ? "~/Library/Application Support/Flownative/Local Beach/MariaDB" : "~/.Flownative/Local Beach/MariaDB"
    _zipfile = is_mac? ? "beach_darwin_amd64.zip" : "beach_linux_amd64.zip"

    system "unzip", _zipfile
    bin.install "beach" => "beach"
    system "beach", "setup", "#{lib}/localbeach", _databasepath
  end
end
